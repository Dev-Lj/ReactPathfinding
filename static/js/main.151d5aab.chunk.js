(this.webpackJsonppathfinder=this.webpackJsonppathfinder||[]).push([[0],{17:function(e,t,a){e.exports=a(26)},23:function(e,t,a){},24:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(15),s=a.n(r),o=a(4),c=a(5),d=a(10),u=a(9),l=a(16),h=a(7),f=a(3),v=a.n(f),b=a(13),m=a(12),j=a(6),O=a(0),k=a(2),p=(a(23),"start"),g="target",y="wall",N="",w="start",P="target",E="wall",C="way",S="visited",T=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"getCoordinates",value:function(){return this.props.coordinates}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"node border "+this.props.mode,onClick:function(){e.props.nodeClicked&&e.props.nodeClicked(e)},onMouseOver:function(t){1===t.buttons&&e.props.nodeClicked(e)}})}}]),a}(i.a.Component),x=Object(k.a)("xPos"),G=Object(k.a)("yPos"),W=Object(k.a)("distanceToStartNode"),M=Object(k.a)("lastNode"),D=Object(k.a)("isVisited"),Y=Object(k.a)("isTargetNode"),F=Object(k.a)("isWall"),L=function(){function e(t,a){Object(o.a)(this,e),Object.defineProperty(this,x,{writable:!0,value:void 0}),Object.defineProperty(this,G,{writable:!0,value:void 0}),Object.defineProperty(this,W,{writable:!0,value:1/0}),Object.defineProperty(this,M,{writable:!0,value:void 0}),Object.defineProperty(this,D,{writable:!0,value:!1}),Object.defineProperty(this,Y,{writable:!0,value:!1}),Object.defineProperty(this,F,{writable:!0,value:!1}),Object(O.a)(this,x)[x]=t,Object(O.a)(this,G)[G]=a}return Object(c.a)(e,[{key:"setDistanceToStartNode",value:function(e){Object(O.a)(this,W)[W]=e}},{key:"getDistanceToStartNode",value:function(){return Object(O.a)(this,W)[W]}},{key:"setTargetNode",value:function(){Object(O.a)(this,Y)[Y]=!0}},{key:"isTargetNode",value:function(){return Object(O.a)(this,Y)[Y]}},{key:"setIsWall",value:function(){Object(O.a)(this,F)[F]=!0}},{key:"isWall",value:function(){return Object(O.a)(this,F)[F]}},{key:"setVisited",value:function(){Object(O.a)(this,D)[D]=!0}},{key:"isVisited",value:function(){return Object(O.a)(this,D)[D]}},{key:"getXPos",value:function(){return Object(O.a)(this,x)[x]}},{key:"getYPos",value:function(){return Object(O.a)(this,G)[G]}},{key:"setLastNode",value:function(e){Object(O.a)(this,M)[M]=e}},{key:"getLastNode",value:function(){return Object(O.a)(this,M)[M]}}]),e}(),V=Object(k.a)("startNode"),X=Object(k.a)("targetNode"),R=Object(k.a)("wallNodes");function z(e){return new Promise((function(t){return setTimeout(t,e)}))}var U=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),n=t.call(this,e),Object.defineProperty(Object(j.a)(n),V,{writable:!0,value:void 0}),Object.defineProperty(Object(j.a)(n),X,{writable:!0,value:void 0}),Object.defineProperty(Object(j.a)(n),R,{writable:!0,value:[]}),n.state={nodesGrid:[],isPathfindingRunning:!1,nodeClickMode:p},n.grid=i.a.createRef(),n.nodeClicked=n.nodeClicked.bind(Object(j.a)(n)),n.initGrid=n.initGrid.bind(Object(j.a)(n)),n.screenTiltEvent=n.screenTiltEvent.bind(Object(j.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.initGrid(),window.addEventListener("orientationchange",this.screenTiltEvent)}},{key:"componentWillUnmount",value:function(){this.removeEventListener("orientationchange",this.screenTiltEvent)}},{key:"screenTiltEvent",value:function(){var e=this;window.addEventListener("resize",(function t(){e.initGrid(),window.removeEventListener("resize",t)}))}},{key:"initGrid",value:function(){var e=this;if(!this.state.isPathfindingRunning){var t=this.calculateGridProportions(),a=function(e,t){for(var a=[],n=0;n<t;n++){a[n]=[];for(var i=0;i<e;i++)a[n][i]={key:""+n+i,coordinates:{Y:n,X:i},mode:N}}return a}(t.Width,t.Height);if(this.isValidNode(Object(O.a)(this,V)[V],t)){var n=this.getNode(a,Object(O.a)(this,V)[V].coordinates);this.setStartNode(n)}else Object(O.a)(this,V)[V]=void 0;if(this.isValidNode(Object(O.a)(this,X)[X],t)){var i=this.getNode(a,Object(O.a)(this,X)[X].coordinates);this.setTargetNode(i)}else Object(O.a)(this,X)[X]=void 0;var r=Object(m.a)(Object(O.a)(this,R)[R]);Object(O.a)(this,R)[R]=[],r.forEach((function(n){if(e.isValidNode(n,t)){var i=e.getNode(a,n.coordinates);e.setWallNode(i,!0)}})),this.setState({nodesGrid:a})}}},{key:"isValidNode",value:function(e,t){return e&&e.coordinates.X<t.Width&&e.coordinates.Y<t.Height}},{key:"calculateGridProportions",value:function(){var e=Math.floor(this.grid.current.offsetWidth/15)-2,t=Math.floor((window.innerHeight-this.grid.current.offsetTop)/15)-2;return{Width:e<60?e:60,Height:t<60?t:60}}},{key:"nodeClicked",value:function(e){if(!this.state.isPathfindingRunning){var t=this.getNode(this.state.nodesGrid,e.getCoordinates());switch(this.state.nodeClickMode){case p:this.setStartNode(t),this.setState({nodeClickMode:g});break;case g:this.setTargetNode(t),this.setState({nodeClickMode:y});break;case y:this.setWallNode(t,!t.isWallNode);break;default:alert("Invalid clickmode: ".concat(this.state.nodeClickMode))}this.setState({nodesGrid:Object(m.a)(this.state.nodesGrid)})}}},{key:"setStartNode",value:function(e){Object(O.a)(this,V)[V]&&(Object(O.a)(this,V)[V].mode=N),e.mode=w,Object(O.a)(this,V)[V]=e}},{key:"setTargetNode",value:function(e){Object(O.a)(this,X)[X]&&(Object(O.a)(this,X)[X].mode=N),e.mode=P,Object(O.a)(this,X)[X]=e}},{key:"setWallNode",value:function(e,t){e.mode=t?E:N,t&&-1===Object(O.a)(this,R)[R].indexOf(e)?Object(O.a)(this,R)[R].push(e):t||-1===Object(O.a)(this,R)[R].indexOf(e)||Object(O.a)(this,R)[R].splice(Object(O.a)(this,R)[R].indexOf(e),1)}},{key:"getNode",value:function(e,t){return e[t.Y][t.X]}},{key:"startPathFinding",value:function(){var e=Object(b.a)(v.a.mark((function e(){var t,a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==Object(O.a)(this,V)[V]&&void 0!==Object(O.a)(this,X)[X]){e.next=3;break}return alert("Start- or targetnode missing. Cannot start Dijkstra"),e.abrupt("return",!1);case 3:return this.setState({isPathfindingRunning:!0}),this.props.pathFinder.init(this.visualGridToNodesGrid()),t=this.props.pathFinder.doPathFinding(),a=t.visitedNodes,n=t.shortestPath,e.next=8,this.visualizePathFinding(a);case 8:return e.next=10,this.visualizeShortestPath(n);case 10:return e.next=12,z(1e3);case 12:this.setState({isPathfindingRunning:!1}),this.initGrid();case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"visualGridToNodesGrid",value:function(){var e,t=[],a=Object(h.a)(this.state.nodesGrid.entries());try{for(a.s();!(e=a.n()).done;){var n=Object(l.a)(e.value,2),i=n[0],r=n[1];t.push([]);var s,o=Object(h.a)(r);try{for(o.s();!(s=o.n()).done;){var c=s.value,d=new L(c.coordinates.X,c.coordinates.Y);if(c.mode!==N)switch(c.mode){case w:d.setDistanceToStartNode(0);break;case P:d.setTargetNode();break;case E:d.setIsWall();break;default:console.error("Unknown NODEMODE: ".concat(c.mode))}t[i].push(d)}}catch(u){o.e(u)}finally{o.f()}}}catch(u){a.e(u)}finally{a.f()}return t}},{key:"visualizePathFinding",value:function(){var e=Object(b.a)(v.a.mark((function e(t){var a,n,i,r=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(h.a)(t),e.prev=1,i=v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.value,r.setState((function(e){var a=Object(m.a)(e.nodesGrid),n=a[t.getYPos()][t.getXPos()];return n.mode===N&&(n.mode=S),a})),e.next=4,z(10);case 4:case"end":return e.stop()}}),e)})),a.s();case 4:if((n=a.n()).done){e.next=8;break}return e.delegateYield(i(),"t0",6);case 6:e.next=4;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),a.e(e.t1);case 13:return e.prev=13,a.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"visualizeShortestPath",value:function(){var e=Object(b.a)(v.a.mark((function e(t){var a,n,i,r=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(h.a)(t),e.prev=1,i=v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.value,r.setState((function(e){var a=Object(m.a)(e.nodesGrid),n=a[t.getYPos()][t.getXPos()];return n.mode===S&&(n.mode=C),a})),e.next=4,z(10);case 4:case"end":return e.stop()}}),e)})),a.s();case 4:if((n=a.n()).done){e.next=8;break}return e.delegateYield(i(),"t0",6);case 6:e.next=4;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),a.e(e.t1);case 13:return e.prev=13,a.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"formatNodes",value:function(e){var t=this;return e.map((function(e,a){return i.a.createElement("div",{key:a,className:"row justify-content-center flex-nowrap"},e.map((function(e,a){return i.a.createElement(T,{key:e.key,coordinates:e.coordinates,mode:e.mode,nodeClicked:t.nodeClicked})})))}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"container-fluid justify-content-center mt-2"},i.a.createElement("div",{className:"row justify-content-center"},i.a.createElement("div",{className:"col-md-2 justify-content-center"},i.a.createElement("div",{className:"form-check"},i.a.createElement("div",{className:"form-check-input"},i.a.createElement(T,{mode:w})),i.a.createElement("label",{className:"form-check-label "+(this.state.nodeClickMode===p?"active":""),onClick:function(){e.setState({nodeClickMode:p})}},"Start Node"))),i.a.createElement("div",{className:"col-md-2 justify-content-center"},i.a.createElement("div",{className:"form-check"},i.a.createElement("div",{className:"form-check-input"},i.a.createElement(T,{mode:P})),i.a.createElement("label",{className:"form-check-label "+(this.state.nodeClickMode===g?"active":""),onClick:function(){e.setState({nodeClickMode:g})}},"Target Node"))),i.a.createElement("div",{className:"col-md-2 justify-content-center"},i.a.createElement("div",{className:"form-check"},i.a.createElement("div",{className:"form-check-input"},i.a.createElement(T,{mode:E})),i.a.createElement("label",{className:"form-check-label "+(this.state.nodeClickMode===y?"active":""),onClick:function(){e.setState({nodeClickMode:y})}},"Wall Node")))),i.a.createElement("div",{className:"row justify-content-center mt-2 mb-2"},i.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){e.startPathFinding()},disabled:this.state.isPathfindingRunning},"Animate Dijkstra")),i.a.createElement("div",{className:"container",ref:this.grid},this.formatNodes(this.state.nodesGrid)))}}]),a}(i.a.Component),B=Object(k.a)("unvisitedNodes"),H=function(){function e(){Object(o.a)(this,e),Object.defineProperty(this,B,{writable:!0,value:void 0})}return Object(c.a)(e,[{key:"init",value:function(e){Object(O.a)(this,B)[B]=this.gridToUnvisited(e)}},{key:"gridToUnvisited",value:function(e){var t,a=[],n=Object(h.a)(e);try{for(n.s();!(t=n.n()).done;){var i,r=t.value,s=Object(h.a)(r);try{for(s.s();!(i=s.n()).done;){var o=i.value;a.push(o)}}catch(c){s.e(c)}finally{s.f()}}}catch(c){n.e(c)}finally{n.f()}return a}},{key:"doPathFinding",value:function(){if(!Object(O.a)(this,B)[B])throw new Error("No nodes were set.");for(var e=[];Object(O.a)(this,B)[B].length;){this.sortByDistance(Object(O.a)(this,B)[B]);var t=Object(O.a)(this,B)[B].shift();if(!t.isWall()){if(t.isTargetNode())return{visitedNodes:e,shortestPath:this.getShortestPath(t)};if(t.getDistanceToStartNode()===1/0)return{visitedNodes:e,shortestPath:[]};var a=this.getUnvisitedNeighbours(t);this.updateNeighbours(a,t),t.setVisited(),e.push(t)}}}},{key:"getShortestPath",value:function(e){for(var t=[],a=e.getLastNode();a;)t.push(a),a=a.getLastNode();return t}},{key:"getUnvisitedNeighbours",value:function(e){var t=e.getXPos(),a=e.getYPos();return Object(O.a)(this,B)[B].filter((function(e){var n=e.getXPos(),i=e.getYPos();return!e.isVisited()&&!e.isWall()&&(n===t+1&&i===a||n===t-1&&i===a||n===t&&i===a+1||n===t&&i===a-1)}))}},{key:"updateNeighbours",value:function(e,t){var a,n=t.getDistanceToStartNode()+1,i=Object(h.a)(e);try{for(i.s();!(a=i.n()).done;){var r=a.value;r.setDistanceToStartNode(n),r.setLastNode(t)}}catch(s){i.e(s)}finally{i.f()}}},{key:"sortByDistance",value:function(e){e.sort((function(e,t){return e.getDistanceToStartNode()-t.getDistanceToStartNode()}))}}]),e}(),I=(a(24),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"navbar navbar-light bg-light"},i.a.createElement("span",{className:"navbar-brand"},"PathFinder")),i.a.createElement(U,{pathFinder:new H}))}}]),a}(i.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(25);s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.151d5aab.chunk.js.map