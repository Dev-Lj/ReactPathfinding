(this.webpackJsonppathfinder=this.webpackJsonppathfinder||[]).push([[0],{17:function(e,t,a){e.exports=a(26)},23:function(e,t,a){},24:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(15),s=a.n(r),o=a(4),c=a(5),d=a(11),l=a(10),u=a(16),h=a(6),f=a(3),v=a.n(f),b=a(13),m=a(8),p=a(7),j=a(0),k=a(2),O=(a(23),"start"),g="target",y="wall",N="",w="start",P="target",E="wall",G="way",S="visited",C=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"getCoordinates",value:function(){return this.props.coordinates}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"node border "+this.props.mode,onClick:function(){e.props.nodeClicked&&e.props.nodeClicked(e)},onMouseOver:function(t){1===t.buttons&&e.props.nodeClicked(e)}})}}]),a}(i.a.Component),x=Object(k.a)("xPos"),M=Object(k.a)("yPos"),T=Object(k.a)("distanceToStartNode"),z=Object(k.a)("lastNode"),W=Object(k.a)("isVisited"),D=Object(k.a)("isTargetNode"),R=Object(k.a)("isWall"),Y=function(){function e(t,a){Object(o.a)(this,e),Object.defineProperty(this,x,{writable:!0,value:void 0}),Object.defineProperty(this,M,{writable:!0,value:void 0}),Object.defineProperty(this,T,{writable:!0,value:1/0}),Object.defineProperty(this,z,{writable:!0,value:void 0}),Object.defineProperty(this,W,{writable:!0,value:!1}),Object.defineProperty(this,D,{writable:!0,value:!1}),Object.defineProperty(this,R,{writable:!0,value:!1}),Object(j.a)(this,x)[x]=t,Object(j.a)(this,M)[M]=a}return Object(c.a)(e,[{key:"setDistanceToStartNode",value:function(e){Object(j.a)(this,T)[T]=e}},{key:"getDistanceToStartNode",value:function(){return Object(j.a)(this,T)[T]}},{key:"setTargetNode",value:function(){Object(j.a)(this,D)[D]=!0}},{key:"isTargetNode",value:function(){return Object(j.a)(this,D)[D]}},{key:"setIsWall",value:function(){Object(j.a)(this,R)[R]=!0}},{key:"isWall",value:function(){return Object(j.a)(this,R)[R]}},{key:"setVisited",value:function(){Object(j.a)(this,W)[W]=!0}},{key:"isVisited",value:function(){return Object(j.a)(this,W)[W]}},{key:"getXPos",value:function(){return Object(j.a)(this,x)[x]}},{key:"getYPos",value:function(){return Object(j.a)(this,M)[M]}},{key:"setLastNode",value:function(e){Object(j.a)(this,z)[z]=e}},{key:"getLastNode",value:function(){return Object(j.a)(this,z)[z]}}]),e}(),F=Object(k.a)("startNode"),L=Object(k.a)("targetNode"),V=Object(k.a)("wallNodes");function X(e,t){for(var a=[],n=0;n<t;n++){a[n]=[];for(var i=0;i<e;i++)a[n][i]={key:""+n+i,coordinates:{Y:n,X:i},mode:N}}return a}function U(e){return new Promise((function(t){return setTimeout(t,e)}))}var H=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),n=t.call(this,e),Object.defineProperty(Object(p.a)(n),F,{writable:!0,value:void 0}),Object.defineProperty(Object(p.a)(n),L,{writable:!0,value:void 0}),Object.defineProperty(Object(p.a)(n),V,{writable:!0,value:[]}),n.state={nodesGrid:[],isPathfindingRunning:!1,nodeClickMode:O},n.grid=i.a.createRef(),n.nodeClicked=n.nodeClicked.bind(Object(p.a)(n)),n.initGrid=n.initGrid.bind(Object(p.a)(n)),n.screenTiltEvent=n.screenTiltEvent.bind(Object(p.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.initGrid(),window.addEventListener("orientationchange",this.screenTiltEvent)}},{key:"componentWillUnmount",value:function(){this.removeEventListener("orientationchange",this.screenTiltEvent)}},{key:"screenTiltEvent",value:function(){var e=this;window.addEventListener("resize",(function t(){e.initGrid(),window.removeEventListener("resize",t)}))}},{key:"initGrid",value:function(){var e=this;if(!this.state.isPathfindingRunning){var t=this.calculateGridProportions(),a=X(t.Width,t.Height);if(this.isValidNode(Object(j.a)(this,F)[F],t)){var n=this.getNode(a,Object(j.a)(this,F)[F].coordinates);this.setStartNode(n)}else Object(j.a)(this,F)[F]=void 0;if(this.isValidNode(Object(j.a)(this,L)[L],t)){var i=this.getNode(a,Object(j.a)(this,L)[L].coordinates);this.setTargetNode(i)}else Object(j.a)(this,L)[L]=void 0;var r=Object(m.a)(Object(j.a)(this,V)[V]);Object(j.a)(this,V)[V]=[],r.forEach((function(n){if(e.isValidNode(n,t)){var i=e.getNode(a,n.coordinates);e.setWallNode(i,!0)}})),this.setState({nodesGrid:a})}}},{key:"clearGrid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.state.isPathfindingRunning){var t=this.calculateGridProportions(),a=X(t.Width,t.Height);return this.setState({nodesGrid:a,nodeClickMode:O}),e?a:void 0}}},{key:"isValidNode",value:function(e,t){return e&&e.coordinates.X<t.Width&&e.coordinates.Y<t.Height}},{key:"calculateGridProportions",value:function(){var e=Math.floor(this.grid.current.offsetWidth/15)-2,t=Math.floor((window.innerHeight-this.grid.current.offsetTop)/15)-2;return{Width:e<60?e:60,Height:t<60?t:60}}},{key:"nodeClicked",value:function(e){if(!this.state.isPathfindingRunning){var t=this.getNode(this.state.nodesGrid,e.getCoordinates());switch(this.state.nodeClickMode){case O:this.setStartNode(t),this.setState({nodeClickMode:g});break;case g:this.setTargetNode(t),this.setState({nodeClickMode:y});break;case y:this.setWallNode(t,!t.isWallNode);break;default:alert("Invalid clickmode: ".concat(this.state.nodeClickMode))}this.setState({nodesGrid:Object(m.a)(this.state.nodesGrid)})}}},{key:"setStartNode",value:function(e){Object(j.a)(this,F)[F]&&(Object(j.a)(this,F)[F].mode=N),e.mode=w,Object(j.a)(this,F)[F]=e}},{key:"setTargetNode",value:function(e){Object(j.a)(this,L)[L]&&(Object(j.a)(this,L)[L].mode=N),e.mode=P,Object(j.a)(this,L)[L]=e}},{key:"setWallNode",value:function(e,t){e.mode=t?E:N,t&&-1===Object(j.a)(this,V)[V].indexOf(e)?Object(j.a)(this,V)[V].push(e):t||-1===Object(j.a)(this,V)[V].indexOf(e)||Object(j.a)(this,V)[V].splice(Object(j.a)(this,V)[V].indexOf(e),1)}},{key:"getNode",value:function(e,t){return e[t.Y][t.X]}},{key:"startPathFinding",value:function(){var e=Object(b.a)(v.a.mark((function e(){var t,a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==Object(j.a)(this,F)[F]&&void 0!==Object(j.a)(this,L)[L]){e.next=3;break}return alert("Start- or targetnode missing. Cannot start Dijkstra"),e.abrupt("return",!1);case 3:return this.setState({isPathfindingRunning:!0}),this.props.pathFinder.init(this.visualGridToNodesGrid()),t=this.props.pathFinder.doPathFinding(),a=t.visitedNodes,n=t.shortestPath,e.next=8,this.visualizePathFinding(a);case 8:return e.next=10,this.visualizeShortestPath(n);case 10:return e.next=12,U(1e3);case 12:this.setState({isPathfindingRunning:!1}),this.initGrid();case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"visualGridToNodesGrid",value:function(){var e,t=[],a=Object(h.a)(this.state.nodesGrid.entries());try{for(a.s();!(e=a.n()).done;){var n=Object(u.a)(e.value,2),i=n[0],r=n[1];t.push([]);var s,o=Object(h.a)(r);try{for(o.s();!(s=o.n()).done;){var c=s.value,d=new Y(c.coordinates.X,c.coordinates.Y);if(c.mode!==N)switch(c.mode){case w:d.setDistanceToStartNode(0);break;case P:d.setTargetNode();break;case E:d.setIsWall();break;default:console.error("Unknown NODEMODE: ".concat(c.mode))}t[i].push(d)}}catch(l){o.e(l)}finally{o.f()}}}catch(l){a.e(l)}finally{a.f()}return t}},{key:"visualizePathFinding",value:function(){var e=Object(b.a)(v.a.mark((function e(t){var a,n,i,r=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(h.a)(t),e.prev=1,i=v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.value,r.setState((function(e){var a=Object(m.a)(e.nodesGrid),n=a[t.getYPos()][t.getXPos()];return n.mode===N&&(n.mode=S),a})),e.next=4,U(10);case 4:case"end":return e.stop()}}),e)})),a.s();case 4:if((n=a.n()).done){e.next=8;break}return e.delegateYield(i(),"t0",6);case 6:e.next=4;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),a.e(e.t1);case 13:return e.prev=13,a.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"visualizeShortestPath",value:function(){var e=Object(b.a)(v.a.mark((function e(t){var a,n,i,r=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(h.a)(t),e.prev=1,i=v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.value,r.setState((function(e){var a=Object(m.a)(e.nodesGrid),n=a[t.getYPos()][t.getXPos()];return n.mode===S&&(n.mode=G),a})),e.next=4,U(10);case 4:case"end":return e.stop()}}),e)})),a.s();case 4:if((n=a.n()).done){e.next=8;break}return e.delegateYield(i(),"t0",6);case 6:e.next=4;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),a.e(e.t1);case 13:return e.prev=13,a.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"formatNodes",value:function(e){var t=this;return e.map((function(e,a){return i.a.createElement("div",{key:a,className:"row justify-content-center flex-nowrap"},e.map((function(e,a){return i.a.createElement(C,{key:e.key,coordinates:e.coordinates,mode:e.mode,nodeClicked:t.nodeClicked})})))}))}},{key:"startMazeGeneration",value:function(){var e=Object(b.a)(v.a.mark((function e(){var t,a,n,i,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.clearGrid(!0),a=this.props.mazeGenerator.generateMaze(t),n=Object(h.a)(a);try{for(n.s();!(i=n.n()).done;)r=i.value,this.props.mazeGenerator.drawWall(t,r.wallDirection,r.wallCoordinate,r.holePos,r.from,r.to),this.setState({nodesGrid:t})}catch(s){n.e(s)}finally{n.f()}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"container-fluid justify-content-center mt-2"},i.a.createElement("div",{className:"row justify-content-center"},i.a.createElement("div",{className:"col-md-2 justify-content-center"},i.a.createElement("div",{className:"form-check"},i.a.createElement("div",{className:"form-check-input"},i.a.createElement(C,{mode:w})),i.a.createElement("label",{className:"form-check-label "+(this.state.nodeClickMode===O?"active":""),onClick:function(){e.setState({nodeClickMode:O})}},"Start Node"))),i.a.createElement("div",{className:"col-md-2 justify-content-center"},i.a.createElement("div",{className:"form-check"},i.a.createElement("div",{className:"form-check-input"},i.a.createElement(C,{mode:P})),i.a.createElement("label",{className:"form-check-label "+(this.state.nodeClickMode===g?"active":""),onClick:function(){e.setState({nodeClickMode:g})}},"Target Node"))),i.a.createElement("div",{className:"col-md-2 justify-content-center"},i.a.createElement("div",{className:"form-check"},i.a.createElement("div",{className:"form-check-input"},i.a.createElement(C,{mode:E})),i.a.createElement("label",{className:"form-check-label "+(this.state.nodeClickMode===y?"active":""),onClick:function(){e.setState({nodeClickMode:y})}},"Wall Node")))),i.a.createElement("div",{className:"row justify-content-center mt-2 mb-2"},i.a.createElement("button",{type:"button",className:"btn btn-secondary btn-sm mr-2",onClick:function(){e.clearGrid()},disabled:this.state.isPathfindingRunning},"Clear Grid"),i.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){e.startPathFinding()},disabled:this.state.isPathfindingRunning},"Animate Dijkstra"),i.a.createElement("button",{type:"button",className:"btn btn-secondary btn-sm ml-2",onClick:function(){e.startMazeGeneration()},disabled:this.state.isPathfindingRunning},"Generate Maze")),i.a.createElement("div",{className:"container",ref:this.grid},this.formatNodes(this.state.nodesGrid)))}}]),a}(i.a.Component),B=Object(k.a)("unvisitedNodes"),I=function(){function e(){Object(o.a)(this,e),Object.defineProperty(this,B,{writable:!0,value:void 0})}return Object(c.a)(e,[{key:"init",value:function(e){Object(j.a)(this,B)[B]=this.gridToUnvisited(e)}},{key:"gridToUnvisited",value:function(e){var t,a=[],n=Object(h.a)(e);try{for(n.s();!(t=n.n()).done;){var i,r=t.value,s=Object(h.a)(r);try{for(s.s();!(i=s.n()).done;){var o=i.value;a.push(o)}}catch(c){s.e(c)}finally{s.f()}}}catch(c){n.e(c)}finally{n.f()}return a}},{key:"doPathFinding",value:function(){if(!Object(j.a)(this,B)[B])throw new Error("No nodes were set.");for(var e=[];Object(j.a)(this,B)[B].length;){this.sortByDistance(Object(j.a)(this,B)[B]);var t=Object(j.a)(this,B)[B].shift();if(!t.isWall()){if(t.isTargetNode())return{visitedNodes:e,shortestPath:this.getShortestPath(t)};if(t.getDistanceToStartNode()===1/0)return{visitedNodes:e,shortestPath:[]};var a=this.getUnvisitedNeighbours(t);this.updateNeighbours(a,t),t.setVisited(),e.push(t)}}}},{key:"getShortestPath",value:function(e){for(var t=[],a=e.getLastNode();a;)t.push(a),a=a.getLastNode();return t}},{key:"getUnvisitedNeighbours",value:function(e){var t=e.getXPos(),a=e.getYPos();return Object(j.a)(this,B)[B].filter((function(e){var n=e.getXPos(),i=e.getYPos();return!e.isVisited()&&!e.isWall()&&(n===t+1&&i===a||n===t-1&&i===a||n===t&&i===a+1||n===t&&i===a-1)}))}},{key:"updateNeighbours",value:function(e,t){var a,n=t.getDistanceToStartNode()+1,i=Object(h.a)(e);try{for(i.s();!(a=i.n()).done;){var r=a.value;r.setDistanceToStartNode(n),r.setLastNode(t)}}catch(s){i.e(s)}finally{i.f()}}},{key:"sortByDistance",value:function(e){e.sort((function(e,t){return e.getDistanceToStartNode()-t.getDistanceToStartNode()}))}}]),e}();function J(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(a.length>t-e)throw new Error("No possible number with given excepts");var n=Math.floor(Math.random()*(t-e+1)+e);return a.includes(n)?J(e,t,a):n}var A=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,[{key:"generateMaze",value:function(e){return this.doMazeGenerationStep(e,0,0,0,e[0].length-1,e.length-1,[],[])}},{key:"getRelevantRedzones",value:function(e,t,a,n,i,r){var s=e.filter((function(e){return e.y>=a&&e.y<=i&&e.x>=t&&e.x<=n}));return s=s.map((function(e){return 1===r?e.y:e.x})),Object(m.a)(new Set(s))}},{key:"doMazeGenerationStep",value:function(e,t,a,n,i,r,s,o){if(r-n>=2&&i-a>=2){var c,d;if(1===t){var l=this.getRelevantRedzones(o,a,n+1,i,r-1,t);try{c=J(n+1,r-1,l)}catch(h){return s}d=J(a,i),o.push({x:d,y:c-1}),o.push({x:d,y:c+1})}else{var u=this.getRelevantRedzones(o,a+1,n,i-1,r,t);try{c=J(a+1,i-1,u)}catch(f){return s}d=J(n,r),o.push({x:c-1,y:d}),o.push({x:c+1,y:d})}s.push({wallDirection:t,wallCoordinate:c,holePos:d,from:0===t?n:a,to:0===t?r:i}),s=this.doMazeGenerationStep(e,0===t?1:0,a,n,0===t?c-1:i,1===t?c-1:r,s,o),s=this.doMazeGenerationStep(e,0===t?1:0,0===t?c+1:a,1===t?c+1:n,i,r,s,o)}return s}},{key:"drawWall",value:function(e,t,a,n,i,r){if(1===t)for(var s=i;s<=r;s++)s!==n&&(e[a][s].mode=E);else for(var o=i;o<=r;o++)o!==n&&(e[o][a].mode=E)}}]),e}(),$=(a(24),function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"navbar navbar-light bg-light"},i.a.createElement("span",{className:"navbar-brand"},"PathFinder")),i.a.createElement(H,{pathFinder:new I,mazeGenerator:new A}))}}]),a}(i.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(25);s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.516a940c.chunk.js.map