(this.webpackJsonppathfinder=this.webpackJsonppathfinder||[]).push([[0],{16:function(e,t,a){e.exports=a(25)},22:function(e,t,a){},23:function(e,t,a){},25:function(e,t,a){"use strict";a.r(t);var i=a(1),n=a.n(i),r=a(15),s=a.n(r),o=a(4),c=a(5),d=a(9),l=a(8),u=a(7),h=a(3),f=a.n(h),v=a(12),b=a(13),j=a(6),p=a(0),k=a(2),m=(a(22),"start"),g="target",N="wall",O=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"getCoordinates",value:function(){return this.props.coordinates}},{key:"render",value:function(){var e=this,t="";return this.props.isTargetNode?t="target":this.props.isStartNode?t="start":this.props.isWallNode?t="wall":this.props.isWay?t="way":this.props.isVisited&&(t="visited"),n.a.createElement("div",{className:"node border "+t,onClick:function(){e.props.nodeClicked&&e.props.nodeClicked(e)}})}}]),a}(n.a.Component),y=Object(k.a)("startNode"),w=Object(k.a)("targetNode");function P(e){return new Promise((function(t){return setTimeout(t,e)}))}var S=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var i;return Object(o.a)(this,a),i=t.call(this,e),Object.defineProperty(Object(j.a)(i),y,{writable:!0,value:void 0}),Object.defineProperty(Object(j.a)(i),w,{writable:!0,value:void 0}),i.state={nodesGrid:[],isPathfindingRunning:!1},i.grid=n.a.createRef(),i.nodeClicked=i.nodeClicked.bind(Object(j.a)(i)),i.initGrid=i.initGrid.bind(Object(j.a)(i)),i}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.initGrid(),window.addEventListener("resize",this.initGrid)}},{key:"componentWillUnmount",value:function(){this.removeEventListener("resize",this.initGrid)}},{key:"initGrid",value:function(){if(!this.state.isPathfindingRunning){var e=this.calculateGridProportions(),t=function(e,t){for(var a=[],i=0;i<t;i++){a[i]=[];for(var n=0;n<e;n++)a[i][n]={key:""+i+n,coordinates:{Y:i,X:n},isVisited:!1,isStartNode:!1,isTargetNode:!1,isWallNode:!1,isWay:!1}}return a}(e.Width,e.Height);Object(p.a)(this,y)[y]&&Object(p.a)(this,y)[y].coordinates.X<e.Width&&Object(p.a)(this,y)[y].coordinates.Y<e.Height?this.setStartNode(t,Object(p.a)(this,y)[y].coordinates):Object(p.a)(this,y)[y]=void 0,Object(p.a)(this,w)[w]&&Object(p.a)(this,w)[w].coordinates.X<e.Width&&Object(p.a)(this,w)[w].coordinates.Y<e.Height?this.setTargetNode(t,Object(p.a)(this,w)[w].coordinates):Object(p.a)(this,w)[w]=void 0,this.setState({nodesGrid:t})}}},{key:"calculateGridProportions",value:function(){var e=Math.floor(this.grid.current.offsetWidth/15)-2,t=Math.floor((window.innerHeight-this.grid.current.offsetTop)/15)-2;return{Width:e<60?e:60,Height:t<60?t:60}}},{key:"formatNodes",value:function(e){var t=this;return e.map((function(e,a){return n.a.createElement("div",{key:a,className:"row justify-content-center flex-nowrap"},e.map((function(e,a){return n.a.createElement(O,{key:e.key,coordinates:e.coordinates,isVisited:e.isVisited,isStartNode:e.isStartNode,isTargetNode:e.isTargetNode,isWay:e.isWay,isWallNode:e.isWallNode,nodeClicked:t.nodeClicked})})))}))}},{key:"nodeClicked",value:function(e){var t=e.getCoordinates();switch(this.props.clickMode){case m:this.setStartNode(this.state.nodesGrid,t);break;case g:this.setTargetNode(this.state.nodesGrid,t);break;case N:this.setWallNode(this.state.nodesGrid,t);break;default:alert("Invalid clickmode: ".concat(this.props.clickMode))}this.setState({nodesGrid:Object(b.a)(this.state.nodesGrid)})}},{key:"setStartNode",value:function(e,t){var a=e[t.Y][t.X];Object(p.a)(this,y)[y]&&(Object(p.a)(this,y)[y].isStartNode=!1),a.isStartNode=!0,Object(p.a)(this,y)[y]=a}},{key:"setTargetNode",value:function(e,t){var a=e[t.Y][t.X];Object(p.a)(this,w)[w]&&(Object(p.a)(this,w)[w].isTargetNode=!1),a.isTargetNode=!0,Object(p.a)(this,w)[w]=a}},{key:"setWallNode",value:function(e,t){var a=e[t.Y][t.X];a.isWallNode=!a.isWallNode}},{key:"startPathFinding",value:function(){var e=Object(v.a)(f.a.mark((function e(){var t,a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==Object(p.a)(this,y)[y]&&void 0!==Object(p.a)(this,w)[w]){e.next=3;break}return alert("Start- or targetnode missing. Cannot start Dijkstra"),e.abrupt("return",!1);case 3:return this.setState({isPathfindingRunning:!0}),this.props.pathFinder.init(this.state.nodesGrid),t=this.props.pathFinder.doPathFinding(),a=t.visitedNodes,i=t.shortestPath,e.next=8,this.visualizePathFinding(a);case 8:return e.next=10,this.visualizeShortestPath(i);case 10:return e.next=12,P(1e3);case 12:this.setState({isPathfindingRunning:!1}),this.initGrid();case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"visualizePathFinding",value:function(){var e=Object(v.a)(f.a.mark((function e(t){var a,i,n,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(u.a)(t),e.prev=1,n=f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.value,r.setState((function(e){var a=Object(b.a)(e.nodesGrid);return a[t.getYPos()][t.getXPos()].isVisited=!0,a})),e.next=4,P(10);case 4:case"end":return e.stop()}}),e)})),a.s();case 4:if((i=a.n()).done){e.next=8;break}return e.delegateYield(n(),"t0",6);case 6:e.next=4;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),a.e(e.t1);case 13:return e.prev=13,a.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"visualizeShortestPath",value:function(){var e=Object(v.a)(f.a.mark((function e(t){var a,i,n,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(u.a)(t),e.prev=1,n=f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.value,r.setState((function(e){var a=Object(b.a)(e.nodesGrid);return a[t.getYPos()][t.getXPos()].isWay=!0,a})),e.next=4,P(10);case 4:case"end":return e.stop()}}),e)})),a.s();case 4:if((i=a.n()).done){e.next=8;break}return e.delegateYield(n(),"t0",6);case 6:e.next=4;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),a.e(e.t1);case 13:return e.prev=13,a.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"container-fluid justify-content-center mt-2"},n.a.createElement("div",{className:"row justify-content-center mb-2"},n.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){e.startPathFinding()},disabled:this.state.isPathfindingRunning},"Animate Dijkstra")),n.a.createElement("div",{className:"container",ref:this.grid},this.formatNodes(this.state.nodesGrid)))}}]),a}(n.a.Component),E=Object(k.a)("xPos"),T=Object(k.a)("yPos"),W=Object(k.a)("distanceToStartNode"),C=Object(k.a)("lastNode"),x=Object(k.a)("isVisited"),G=Object(k.a)("isTargetNode"),M=Object(k.a)("isWall"),Y=function(){function e(t,a){Object(o.a)(this,e),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,T,{writable:!0,value:void 0}),Object.defineProperty(this,W,{writable:!0,value:1/0}),Object.defineProperty(this,C,{writable:!0,value:void 0}),Object.defineProperty(this,x,{writable:!0,value:!1}),Object.defineProperty(this,G,{writable:!0,value:!1}),Object.defineProperty(this,M,{writable:!0,value:!1}),Object(p.a)(this,E)[E]=t,Object(p.a)(this,T)[T]=a}return Object(c.a)(e,[{key:"setDistanceToStartNode",value:function(e){Object(p.a)(this,W)[W]=e}},{key:"getDistanceToStartNode",value:function(){return Object(p.a)(this,W)[W]}},{key:"setTargetNode",value:function(){Object(p.a)(this,G)[G]=!0}},{key:"isTargetNode",value:function(){return Object(p.a)(this,G)[G]}},{key:"setIsWall",value:function(){Object(p.a)(this,M)[M]=!0}},{key:"isWall",value:function(){return Object(p.a)(this,M)[M]}},{key:"setVisited",value:function(){Object(p.a)(this,x)[x]=!0}},{key:"isVisited",value:function(){return Object(p.a)(this,x)[x]}},{key:"getXPos",value:function(){return Object(p.a)(this,E)[E]}},{key:"getYPos",value:function(){return Object(p.a)(this,T)[T]}},{key:"setLastNode",value:function(e){Object(p.a)(this,C)[C]=e}},{key:"getLastNode",value:function(){return Object(p.a)(this,C)[C]}}]),e}(),D=Object(k.a)("unvisitedNodes"),X=function(){function e(){Object(o.a)(this,e),Object.defineProperty(this,D,{writable:!0,value:void 0})}return Object(c.a)(e,[{key:"init",value:function(e){Object(p.a)(this,D)[D]=this.gridToUnvisited(e)}},{key:"gridToUnvisited",value:function(e){var t,a=[],i=Object(u.a)(e);try{for(i.s();!(t=i.n()).done;){var n,r=t.value,s=Object(u.a)(r);try{for(s.s();!(n=s.n()).done;){var o=n.value,c=new Y(o.coordinates.X,o.coordinates.Y);a.push(c),o.isTargetNode&&c.setTargetNode(),o.isStartNode&&c.setDistanceToStartNode(0),o.isWallNode&&c.setIsWall()}}catch(d){s.e(d)}finally{s.f()}}}catch(d){i.e(d)}finally{i.f()}return a}},{key:"doPathFinding",value:function(){if(!Object(p.a)(this,D)[D])throw new Error("No nodes were set.");for(var e=[];Object(p.a)(this,D)[D].length;){this.sortByDistance(Object(p.a)(this,D)[D]);var t=Object(p.a)(this,D)[D].shift();if(t.isWall())console.log(t.getXPos(),t.getYPos());else{if(t.isTargetNode())return{visitedNodes:e,shortestPath:this.getShortestPath(t)};if(t.getDistanceToStartNode()===1/0)return{visitedNodes:e,shortestPath:[]};var a=this.getUnvisitedNeighbours(t);this.updateNeighbours(a,t),t.setVisited(),e.push(t)}}}},{key:"getShortestPath",value:function(e){for(var t=[],a=e.getLastNode();a;)t.push(a),a=a.getLastNode();return t}},{key:"getUnvisitedNeighbours",value:function(e){var t=e.getXPos(),a=e.getYPos();return Object(p.a)(this,D)[D].filter((function(e){var i=e.getXPos(),n=e.getYPos();return!e.isVisited()&&!e.isWall()&&(i===t+1&&n===a||i===t-1&&n===a||i===t&&n===a+1||i===t&&n===a-1)}))}},{key:"updateNeighbours",value:function(e,t){var a,i=t.getDistanceToStartNode()+1,n=Object(u.a)(e);try{for(n.s();!(a=n.n()).done;){var r=a.value;r.setDistanceToStartNode(i),r.setLastNode(t)}}catch(s){n.e(s)}finally{n.f()}}},{key:"sortByDistance",value:function(e){e.sort((function(e,t){return e.getDistanceToStartNode()-t.getDistanceToStartNode()}))}}]),e}(),F=(a(23),function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={nodeClickMode:m},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("div",{className:"navbar navbar-light bg-light"},n.a.createElement("span",{className:"navbar-brand"},"PathFinder")),n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-md-2 justify-content-center"},n.a.createElement("div",{className:"form-check"},n.a.createElement("div",{className:"form-check-input"},n.a.createElement(O,{isStartNode:!0})),n.a.createElement("label",{className:"form-check-label "+(this.state.nodeClickMode===m?"active":""),onClick:function(){e.setState({nodeClickMode:m})}},"Start Node"))),n.a.createElement("div",{className:"col-md-2 justify-content-center"},n.a.createElement("div",{className:"form-check"},n.a.createElement("div",{className:"form-check-input"},n.a.createElement(O,{isTargetNode:!0})),n.a.createElement("label",{className:"form-check-label "+(this.state.nodeClickMode===g?"active":""),onClick:function(){e.setState({nodeClickMode:g})}},"Target Node"))),n.a.createElement("div",{className:"col-md-2 justify-content-center"},n.a.createElement("div",{className:"form-check"},n.a.createElement("div",{className:"form-check-input"},n.a.createElement(O,{isWallNode:!0})),n.a.createElement("label",{className:"form-check-label "+(this.state.nodeClickMode===N?"active":""),onClick:function(){e.setState({nodeClickMode:N})}},"Wall Node")))),n.a.createElement(S,{pathFinder:new X,clickMode:this.state.nodeClickMode}))}}]),a}(n.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(24);s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.5331d4bc.chunk.js.map