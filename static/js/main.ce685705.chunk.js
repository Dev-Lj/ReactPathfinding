(this.webpackJsonppathfinder=this.webpackJsonppathfinder||[]).push([[0],{17:function(e,t,a){e.exports=a(26)},23:function(e,t,a){},24:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(15),o=a.n(r),s=a(4),c=a(5),d=a(11),u=a(10),l=a(16),h=a(7),f=a(3),v=a.n(f),b=a(13),m=a(8),j=a(6),p=a(0),O=a(2),k=(a(23),"start"),y="target",g="wall",N="",w="start",P="target",E="wall",x="way",G="visited",S=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"getCoordinates",value:function(){return this.props.coordinates}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"node border "+this.props.mode,onClick:function(){e.props.nodeClicked&&e.props.nodeClicked(e)},onMouseOver:function(t){1===t.buttons&&e.props.nodeClicked(e)}})}}]),a}(i.a.Component),C=Object(O.a)("xPos"),M=Object(O.a)("yPos"),T=Object(O.a)("distanceToStartNode"),z=Object(O.a)("lastNode"),W=Object(O.a)("isVisited"),D=Object(O.a)("isTargetNode"),R=Object(O.a)("isWall"),F=function(){function e(t,a){Object(s.a)(this,e),Object.defineProperty(this,C,{writable:!0,value:void 0}),Object.defineProperty(this,M,{writable:!0,value:void 0}),Object.defineProperty(this,T,{writable:!0,value:1/0}),Object.defineProperty(this,z,{writable:!0,value:void 0}),Object.defineProperty(this,W,{writable:!0,value:!1}),Object.defineProperty(this,D,{writable:!0,value:!1}),Object.defineProperty(this,R,{writable:!0,value:!1}),Object(p.a)(this,C)[C]=t,Object(p.a)(this,M)[M]=a}return Object(c.a)(e,[{key:"setDistanceToStartNode",value:function(e){Object(p.a)(this,T)[T]=e}},{key:"getDistanceToStartNode",value:function(){return Object(p.a)(this,T)[T]}},{key:"setTargetNode",value:function(){Object(p.a)(this,D)[D]=!0}},{key:"isTargetNode",value:function(){return Object(p.a)(this,D)[D]}},{key:"setIsWall",value:function(){Object(p.a)(this,R)[R]=!0}},{key:"isWall",value:function(){return Object(p.a)(this,R)[R]}},{key:"setVisited",value:function(){Object(p.a)(this,W)[W]=!0}},{key:"isVisited",value:function(){return Object(p.a)(this,W)[W]}},{key:"getXPos",value:function(){return Object(p.a)(this,C)[C]}},{key:"getYPos",value:function(){return Object(p.a)(this,M)[M]}},{key:"setLastNode",value:function(e){Object(p.a)(this,z)[z]=e}},{key:"getLastNode",value:function(){return Object(p.a)(this,z)[z]}}]),e}(),Y=Object(O.a)("startNode"),L=Object(O.a)("targetNode"),V=Object(O.a)("wallNodes"),X=Object(O.a)("isPathFindingAborted");function A(e,t){for(var a=[],n=0;n<t;n++){a[n]=[];for(var i=0;i<e;i++)a[n][i]={key:""+n+i,coordinates:{Y:n,X:i},mode:N}}return a}function U(e){return new Promise((function(t){return setTimeout(t,e)}))}var H=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),n=t.call(this,e),Object.defineProperty(Object(j.a)(n),Y,{writable:!0,value:void 0}),Object.defineProperty(Object(j.a)(n),L,{writable:!0,value:void 0}),Object.defineProperty(Object(j.a)(n),V,{writable:!0,value:[]}),Object.defineProperty(Object(j.a)(n),X,{writable:!0,value:!1}),n.state={nodesGrid:[],isPathfindingRunning:!1,nodeClickMode:k},n.grid=i.a.createRef(),n.nodeClicked=n.nodeClicked.bind(Object(j.a)(n)),n.initGrid=n.initGrid.bind(Object(j.a)(n)),n.screenTiltEvent=n.screenTiltEvent.bind(Object(j.a)(n)),n.abortAnimation=n.abortAnimation.bind(Object(j.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.initGrid(),window.addEventListener("orientationchange",this.screenTiltEvent)}},{key:"componentWillUnmount",value:function(){this.removeEventListener("orientationchange",this.screenTiltEvent)}},{key:"screenTiltEvent",value:function(){var e=this;window.addEventListener("resize",(function t(){e.initGrid(),window.removeEventListener("resize",t)}))}},{key:"initGrid",value:function(){var e=this;if(!this.state.isPathfindingRunning){var t=this.calculateGridProportions(),a=A(t.Width,t.Height);if(this.isValidNode(Object(p.a)(this,Y)[Y],t)){var n=this.getNode(a,Object(p.a)(this,Y)[Y].coordinates);this.setStartNode(n)}else Object(p.a)(this,Y)[Y]=void 0;if(this.isValidNode(Object(p.a)(this,L)[L],t)){var i=this.getNode(a,Object(p.a)(this,L)[L].coordinates);this.setTargetNode(i)}else Object(p.a)(this,L)[L]=void 0;var r=Object(m.a)(Object(p.a)(this,V)[V]);Object(p.a)(this,V)[V]=[],r.forEach((function(n){if(e.isValidNode(n,t)){var i=e.getNode(a,n.coordinates);e.setWallNode(i,!0)}})),this.setState({nodesGrid:a})}}},{key:"clearGrid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.state.isPathfindingRunning){var t=this.calculateGridProportions(),a=A(t.Width,t.Height);return this.setState({nodesGrid:a,nodeClickMode:k}),Object(p.a)(this,Y)[Y]=void 0,Object(p.a)(this,L)[L]=void 0,Object(p.a)(this,V)[V]=[],e?a:void 0}}},{key:"abortAnimation",value:function(){this.setState({isPathfindingRunning:!1}),Object(p.a)(this,X)[X]=!0}},{key:"isValidNode",value:function(e,t){return e&&e.coordinates.X<t.Width&&e.coordinates.Y<t.Height}},{key:"calculateGridProportions",value:function(){var e=Math.floor(this.grid.current.offsetWidth/15)-2,t=Math.floor((window.innerHeight-this.grid.current.offsetTop)/15)-2;return{Width:e<60?e:60,Height:t<60?t:60}}},{key:"nodeClicked",value:function(e){if(!this.state.isPathfindingRunning){var t=this.getNode(this.state.nodesGrid,e.getCoordinates());switch(this.state.nodeClickMode){case k:this.setStartNode(t),this.setState({nodeClickMode:y});break;case y:this.setTargetNode(t),this.setState({nodeClickMode:g});break;case g:this.setWallNode(t,!t.isWallNode);break;default:alert("Invalid clickmode: ".concat(this.state.nodeClickMode))}this.setState({nodesGrid:Object(m.a)(this.state.nodesGrid)})}}},{key:"setStartNode",value:function(e){Object(p.a)(this,Y)[Y]&&(Object(p.a)(this,Y)[Y].mode=N),e.mode=w,Object(p.a)(this,Y)[Y]=e}},{key:"setTargetNode",value:function(e){Object(p.a)(this,L)[L]&&(Object(p.a)(this,L)[L].mode=N),e.mode=P,Object(p.a)(this,L)[L]=e}},{key:"setWallNode",value:function(e,t){e.mode=t?E:N,t&&-1===Object(p.a)(this,V)[V].indexOf(e)?Object(p.a)(this,V)[V].push(e):t||-1===Object(p.a)(this,V)[V].indexOf(e)||Object(p.a)(this,V)[V].splice(Object(p.a)(this,V)[V].indexOf(e),1)}},{key:"getNode",value:function(e,t){return e[t.Y][t.X]}},{key:"startPathFinding",value:function(){var e=Object(b.a)(v.a.mark((function e(){var t,a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==Object(p.a)(this,Y)[Y]&&void 0!==Object(p.a)(this,L)[L]){e.next=3;break}return alert("Start- or targetnode missing. Cannot start Dijkstra"),e.abrupt("return",!1);case 3:return this.setState({isPathfindingRunning:!0}),this.props.pathFinder.init(this.visualGridToNodesGrid()),t=this.props.pathFinder.doPathFinding(),a=t.visitedNodes,n=t.shortestPath,e.next=8,this.visualizePathFinding(a);case 8:return e.next=10,this.visualizeShortestPath(n);case 10:if(Object(p.a)(this,X)[X]){e.next=15;break}return e.next=13,U(1e3);case 13:e.next=16;break;case 15:Object(p.a)(this,X)[X]=!1;case 16:this.setState({isPathfindingRunning:!1}),this.initGrid();case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"visualGridToNodesGrid",value:function(){var e,t=[],a=Object(h.a)(this.state.nodesGrid.entries());try{for(a.s();!(e=a.n()).done;){var n=Object(l.a)(e.value,2),i=n[0],r=n[1];t.push([]);var o,s=Object(h.a)(r);try{for(s.s();!(o=s.n()).done;){var c=o.value,d=new F(c.coordinates.X,c.coordinates.Y);if(c.mode!==N)switch(c.mode){case w:d.setDistanceToStartNode(0);break;case P:d.setTargetNode();break;case E:d.setIsWall();break;default:console.error("Unknown NODEMODE: ".concat(c.mode))}t[i].push(d)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){a.e(u)}finally{a.f()}return t}},{key:"visualizePathFinding",value:function(){var e=Object(b.a)(v.a.mark((function e(t){var a,n,i,r,o=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(h.a)(t),e.prev=1,i=v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.value,o.setState((function(e){var a=Object(m.a)(e.nodesGrid),n=a[t.getYPos()][t.getXPos()];return n.mode===N&&(n.mode=G),a})),!Object(p.a)(o,X)[X]){e.next=4;break}return e.abrupt("return",{v:void 0});case 4:return e.next=6,U(10);case 6:case"end":return e.stop()}}),e)})),a.s();case 4:if((n=a.n()).done){e.next=11;break}return e.delegateYield(i(),"t0",6);case 6:if("object"!==typeof(r=e.t0)){e.next=9;break}return e.abrupt("return",r.v);case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(1),a.e(e.t1);case 16:return e.prev=16,a.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"visualizeShortestPath",value:function(){var e=Object(b.a)(v.a.mark((function e(t){var a,n,i,r,o=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(h.a)(t),e.prev=1,i=v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.value,!Object(p.a)(o,X)[X]){e.next=3;break}return e.abrupt("return",{v:void 0});case 3:return o.setState((function(e){var a=Object(m.a)(e.nodesGrid),n=a[t.getYPos()][t.getXPos()];return n.mode===G&&(n.mode=x),a})),e.next=6,U(10);case 6:case"end":return e.stop()}}),e)})),a.s();case 4:if((n=a.n()).done){e.next=11;break}return e.delegateYield(i(),"t0",6);case 6:if("object"!==typeof(r=e.t0)){e.next=9;break}return e.abrupt("return",r.v);case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(1),a.e(e.t1);case 16:return e.prev=16,a.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"formatNodes",value:function(e){var t=this;return e.map((function(e,a){return i.a.createElement("div",{key:a,className:"row justify-content-center flex-nowrap"},e.map((function(e,a){return i.a.createElement(S,{key:e.key,coordinates:e.coordinates,mode:e.mode,nodeClicked:t.nodeClicked})})))}))}},{key:"startMazeGeneration",value:function(){var e=Object(b.a)(v.a.mark((function e(){var t,a,n,i,r,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.clearGrid(!0),a=this.props.mazeGenerator.generateMaze(t),n=Object(h.a)(a);try{for(n.s();!(i=n.n()).done;)r=i.value,o=this.props.mazeGenerator.drawWall(t,r.wallDirection,r.wallCoordinate,r.holePos,r.from,r.to),Object(p.a)(this,V)[V]=Object(p.a)(this,V)[V].concat(o),this.setState({nodesGrid:t})}catch(s){n.e(s)}finally{n.f()}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"container-fluid justify-content-center mt-2"},i.a.createElement("div",{className:"row justify-content-center"},i.a.createElement("div",{className:"col-md-2 justify-content-center"},i.a.createElement("div",{className:"form-check"},i.a.createElement("div",{className:"form-check-input"},i.a.createElement(S,{mode:w})),i.a.createElement("label",{className:"form-check-label "+(this.state.nodeClickMode===k?"active":""),onClick:function(){e.setState({nodeClickMode:k})}},"Start Node"))),i.a.createElement("div",{className:"col-md-2 justify-content-center"},i.a.createElement("div",{className:"form-check"},i.a.createElement("div",{className:"form-check-input"},i.a.createElement(S,{mode:P})),i.a.createElement("label",{className:"form-check-label "+(this.state.nodeClickMode===y?"active":""),onClick:function(){e.setState({nodeClickMode:y})}},"Target Node"))),i.a.createElement("div",{className:"col-md-2 justify-content-center"},i.a.createElement("div",{className:"form-check"},i.a.createElement("div",{className:"form-check-input"},i.a.createElement(S,{mode:E})),i.a.createElement("label",{className:"form-check-label "+(this.state.nodeClickMode===g?"active":""),onClick:function(){e.setState({nodeClickMode:g})}},"Wall Node")))),i.a.createElement("div",{className:"row justify-content-center mt-2 mb-2",hidden:this.state.isPathfindingRunning},i.a.createElement("button",{type:"button",className:"btn btn-secondary btn-sm mr-2",onClick:function(){e.clearGrid()}},"Clear Grid"),i.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){e.startPathFinding()}},"Animate Dijkstra"),i.a.createElement("button",{type:"button",className:"btn btn-secondary btn-sm ml-2",onClick:function(){e.startMazeGeneration()}},"Generate Maze")),i.a.createElement("div",{className:"row justify-content-center mt-2 mb-2",hidden:!this.state.isPathfindingRunning},i.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){e.abortAnimation()}},"Abort Animation")),i.a.createElement("div",{className:"container",ref:this.grid},this.formatNodes(this.state.nodesGrid)))}}]),a}(i.a.Component),B=Object(O.a)("unvisitedNodes"),I=function(){function e(){Object(s.a)(this,e),Object.defineProperty(this,B,{writable:!0,value:void 0})}return Object(c.a)(e,[{key:"init",value:function(e){Object(p.a)(this,B)[B]=this.gridToUnvisited(e)}},{key:"gridToUnvisited",value:function(e){var t,a=[],n=Object(h.a)(e);try{for(n.s();!(t=n.n()).done;){var i,r=t.value,o=Object(h.a)(r);try{for(o.s();!(i=o.n()).done;){var s=i.value;a.push(s)}}catch(c){o.e(c)}finally{o.f()}}}catch(c){n.e(c)}finally{n.f()}return a}},{key:"doPathFinding",value:function(){if(!Object(p.a)(this,B)[B])throw new Error("No nodes were set.");for(var e=[];Object(p.a)(this,B)[B].length;){this.sortByDistance(Object(p.a)(this,B)[B]);var t=Object(p.a)(this,B)[B].shift();if(!t.isWall()){if(t.isTargetNode())return{visitedNodes:e,shortestPath:this.getShortestPath(t)};if(t.getDistanceToStartNode()===1/0)return{visitedNodes:e,shortestPath:[]};var a=this.getUnvisitedNeighbours(t);this.updateNeighbours(a,t),t.setVisited(),e.push(t)}}}},{key:"getShortestPath",value:function(e){for(var t=[],a=e.getLastNode();a;)t.push(a),a=a.getLastNode();return t}},{key:"getUnvisitedNeighbours",value:function(e){var t=e.getXPos(),a=e.getYPos();return Object(p.a)(this,B)[B].filter((function(e){var n=e.getXPos(),i=e.getYPos();return!e.isVisited()&&!e.isWall()&&(n===t+1&&i===a||n===t-1&&i===a||n===t&&i===a+1||n===t&&i===a-1)}))}},{key:"updateNeighbours",value:function(e,t){var a,n=t.getDistanceToStartNode()+1,i=Object(h.a)(e);try{for(i.s();!(a=i.n()).done;){var r=a.value;r.setDistanceToStartNode(n),r.setLastNode(t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"sortByDistance",value:function(e){e.sort((function(e,t){return e.getDistanceToStartNode()-t.getDistanceToStartNode()}))}}]),e}();function J(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(a.length>t-e)throw new Error("No possible number with given excepts");var n=Math.floor(Math.random()*(t-e+1)+e);return a.includes(n)?J(e,t,a):n}var $=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,[{key:"generateMaze",value:function(e){return this.doMazeGenerationStep(e,0,0,0,e[0].length-1,e.length-1,[],[])}},{key:"getRelevantRedzones",value:function(e,t,a,n,i,r){var o=e.filter((function(e){return e.y>=a&&e.y<=i&&e.x>=t&&e.x<=n}));return o=o.map((function(e){return 1===r?e.y:e.x})),Object(m.a)(new Set(o))}},{key:"doMazeGenerationStep",value:function(e,t,a,n,i,r,o,s){if(r-n>=2&&i-a>=2){var c,d;if(1===t){var u=this.getRelevantRedzones(s,a,n+1,i,r-1,t);try{c=J(n+1,r-1,u)}catch(h){return o}d=J(a,i),s.push({x:d,y:c-1}),s.push({x:d,y:c+1})}else{var l=this.getRelevantRedzones(s,a+1,n,i-1,r,t);try{c=J(a+1,i-1,l)}catch(f){return o}d=J(n,r),s.push({x:c-1,y:d}),s.push({x:c+1,y:d})}o.push({wallDirection:t,wallCoordinate:c,holePos:d,from:0===t?n:a,to:0===t?r:i}),o=this.doMazeGenerationStep(e,0===t?1:0,a,n,0===t?c-1:i,1===t?c-1:r,o,s),o=this.doMazeGenerationStep(e,0===t?1:0,0===t?c+1:a,1===t?c+1:n,i,r,o,s)}return o}},{key:"drawWall",value:function(e,t,a,n,i,r){var o=[];if(1===t)for(var s=i;s<=r;s++)s!==n&&(e[a][s].mode=E,o.push(e[a][s]));else for(var c=i;c<=r;c++)c!==n&&(e[c][a].mode=E,o.push(e[c][a]));return o}}]),e}(),q=(a(24),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"navbar navbar-light bg-light"},i.a.createElement("span",{className:"navbar-brand"},"PathFinder")),i.a.createElement(H,{pathFinder:new I,mazeGenerator:new $}))}}]),a}(i.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(25);o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.ce685705.chunk.js.map